# SJISテキスト中の半角に変換できる全角文字を半角に変換する
# 変換できないものはそのまま
$table{"\x81\x40"} = "\x20";
$table{"\x81\x41"} = "\xa4";
$table{"\x81\x42"} = "\xa1";
$table{"\x81\x43"} = "\x2c";
$table{"\x81\x44"} = "\x2e";
$table{"\x81\x45"} = "\xa5";
$table{"\x81\x46"} = "\x3a";
$table{"\x81\x47"} = "\x3b";
$table{"\x81\x48"} = "\x3f";
$table{"\x81\x49"} = "\x21";
$table{"\x81\x4a"} = "\xde";
$table{"\x81\x4b"} = "\xdf";
$table{"\x81\x4f"} = "\x5e";
$table{"\x81\x51"} = "\x5f";
$table{"\x81\x5b"} = "\xb0";
$table{"\x81\x5e"} = "\x2f";
$table{"\x81\x5f"} = "\x5c";
$table{"\x81\x62"} = "\x7c";
$table{"\x81\x69"} = "\x28";
$table{"\x81\x6a"} = "\x29";
$table{"\x81\x6d"} = "\x5b";
$table{"\x81\x6e"} = "\x5d";
$table{"\x81\x6f"} = "\x7b";
$table{"\x81\x70"} = "\x7d";
$table{"\x81\x71"} = "\x3c";
$table{"\x81\x72"} = "\x3e";
$table{"\x81\x75"} = "\xa2";
$table{"\x81\x76"} = "\xa3";
$table{"\x81\x7b"} = "\x2b";
$table{"\x81\x7c"} = "\x2d";
$table{"\x81\x81"} = "\x3d";
$table{"\x81\x83"} = "\x3c";
$table{"\x81\x84"} = "\x3e";
$table{"\x81\x8f"} = "\x5c";
$table{"\x81\x90"} = "\x24";
$table{"\x81\x93"} = "\x25";
$table{"\x81\x94"} = "\x23";
$table{"\x81\x95"} = "\x26";
$table{"\x81\x96"} = "\x2a";
$table{"\x81\x97"} = "\x40";
$table{"\x82\x4f"} = "\x30";
$table{"\x82\x50"} = "\x31";
$table{"\x82\x51"} = "\x32";
$table{"\x82\x52"} = "\x33";
$table{"\x82\x53"} = "\x34";
$table{"\x82\x54"} = "\x35";
$table{"\x82\x55"} = "\x36";
$table{"\x82\x56"} = "\x37";
$table{"\x82\x57"} = "\x38";
$table{"\x82\x58"} = "\x39";
$table{"\x82\x60"} = "\x41";
$table{"\x82\x61"} = "\x42";
$table{"\x82\x62"} = "\x43";
$table{"\x82\x63"} = "\x44";
$table{"\x82\x64"} = "\x45";
$table{"\x82\x65"} = "\x46";
$table{"\x82\x66"} = "\x47";
$table{"\x82\x67"} = "\x48";
$table{"\x82\x68"} = "\x49";
$table{"\x82\x69"} = "\x4a";
$table{"\x82\x6a"} = "\x4b";
$table{"\x82\x6b"} = "\x4c";
$table{"\x82\x6c"} = "\x4d";
$table{"\x82\x6d"} = "\x4e";
$table{"\x82\x6e"} = "\x4f";
$table{"\x82\x6f"} = "\x50";
$table{"\x82\x70"} = "\x51";
$table{"\x82\x71"} = "\x52";
$table{"\x82\x72"} = "\x53";
$table{"\x82\x73"} = "\x54";
$table{"\x82\x74"} = "\x55";
$table{"\x82\x75"} = "\x56";
$table{"\x82\x76"} = "\x57";
$table{"\x82\x77"} = "\x58";
$table{"\x82\x78"} = "\x59";
$table{"\x82\x79"} = "\x5a";
$table{"\x82\x81"} = "\x61";
$table{"\x82\x82"} = "\x62";
$table{"\x82\x83"} = "\x63";
$table{"\x82\x84"} = "\x64";
$table{"\x82\x85"} = "\x65";
$table{"\x82\x86"} = "\x66";
$table{"\x82\x87"} = "\x67";
$table{"\x82\x88"} = "\x68";
$table{"\x82\x89"} = "\x69";
$table{"\x82\x8a"} = "\x6a";
$table{"\x82\x8b"} = "\x6b";
$table{"\x82\x8c"} = "\x6c";
$table{"\x82\x8d"} = "\x6d";
$table{"\x82\x8e"} = "\x6e";
$table{"\x82\x8f"} = "\x6f";
$table{"\x82\x90"} = "\x70";
$table{"\x82\x91"} = "\x71";
$table{"\x82\x92"} = "\x72";
$table{"\x82\x93"} = "\x73";
$table{"\x82\x94"} = "\x74";
$table{"\x82\x95"} = "\x75";
$table{"\x82\x96"} = "\x76";
$table{"\x82\x97"} = "\x77";
$table{"\x82\x98"} = "\x78";
$table{"\x82\x99"} = "\x79";
$table{"\x82\x9a"} = "\x7a";
$table{"\x83\x40"} = "\xa7";
$table{"\x83\x41"} = "\xb1";
$table{"\x83\x42"} = "\xa8";
$table{"\x83\x43"} = "\xb2";
$table{"\x83\x44"} = "\xa9";
$table{"\x83\x45"} = "\xb3";
$table{"\x83\x46"} = "\xaa";
$table{"\x83\x47"} = "\xb4";
$table{"\x83\x48"} = "\xab";
$table{"\x83\x49"} = "\xb5";
$table{"\x83\x4a"} = "\xb6";
$table{"\x83\x4c"} = "\xb7";
$table{"\x83\x4e"} = "\xb8";
$table{"\x83\x50"} = "\xb9";
$table{"\x83\x52"} = "\xba";
$table{"\x83\x54"} = "\xbb";
$table{"\x83\x56"} = "\xbc";
$table{"\x83\x58"} = "\xbd";
$table{"\x83\x5a"} = "\xbe";
$table{"\x83\x5c"} = "\xbf";
$table{"\x83\x5e"} = "\xc0";
$table{"\x83\x60"} = "\xc1";
$table{"\x83\x62"} = "\xaf";
$table{"\x83\x63"} = "\xc2";
$table{"\x83\x65"} = "\xc3";
$table{"\x83\x67"} = "\xc4";
$table{"\x83\x69"} = "\xc5";
$table{"\x83\x6a"} = "\xc6";
$table{"\x83\x6b"} = "\xc7";
$table{"\x83\x6c"} = "\xc8";
$table{"\x83\x6d"} = "\xc9";
$table{"\x83\x6e"} = "\xca";
$table{"\x83\x71"} = "\xcb";
$table{"\x83\x74"} = "\xcc";
$table{"\x83\x77"} = "\xcd";
$table{"\x83\x7a"} = "\xce";
$table{"\x83\x7d"} = "\xcf";
$table{"\x83\x7e"} = "\xd0";
$table{"\x83\x80"} = "\xd1";
$table{"\x83\x81"} = "\xd2";
$table{"\x83\x82"} = "\xd3";
$table{"\x83\x83"} = "\xac";
$table{"\x83\x84"} = "\xd4";
$table{"\x83\x85"} = "\xad";
$table{"\x83\x86"} = "\xd5";
$table{"\x83\x87"} = "\xae";
$table{"\x83\x88"} = "\xd6";
$table{"\x83\x89"} = "\xd7";
$table{"\x83\x8a"} = "\xd8";
$table{"\x83\x8b"} = "\xd9";
$table{"\x83\x8c"} = "\xda";
$table{"\x83\x8d"} = "\xdb";
$table{"\x83\x8f"} = "\xdc";
$table{"\x83\x92"} = "\xa6";
$table{"\x83\x93"} = "\xdd";
$table{"\x81\x5d"} = "\x2d";
$table{"\x81\x66"} = "\x27";
$table{"\x81\x67"} = "\x22";
$table{"\x81\x68"} = "\x22";
$table{"\x81\x6b"} = "\x5b";
$table{"\x81\x6c"} = "\x5d";
$table{"\x81\x77"} = "\xa2";
$table{"\x81\x78"} = "\xa3";
$table{"\x81\x79"} = "\x5b";
$table{"\x81\x7a"} = "\x5d";
$table{"\x81\x8b"} = "\xdf";
$table{"\x81\x8c"} = "\x27";
$table{"\x81\x8d"} = "\x22";
$table{"\x81\x4c"} = "\x27";
$table{"\x81\x4d"} = "\x60";
$table{"\x81\x5c"} = "\x2d";
$table{"\x81\x60"} = "\x7e";
$table{"\x81\x63"} = "\xa5\xa5\xa5";
$table{"\x81\x64"} = "\xa5\xa5";
$table{"\x81\x65"} = "\x27";
$table{"\x81\x73"} = "\x3c\x3c";
$table{"\x81\x74"} = "\x3e\x3e";
$table{"\x81\x8e"} = "\xdf\x43";
$table{"\x83\x4b"} = "\xb6\xde";
$table{"\x83\x4d"} = "\xb7\xde";
$table{"\x83\x4f"} = "\xb8\xde";
$table{"\x83\x51"} = "\xb9\xde";
$table{"\x83\x53"} = "\xba\xde";
$table{"\x83\x55"} = "\xbb\xde";
$table{"\x83\x57"} = "\xbc\xde";
$table{"\x83\x59"} = "\xbd\xde";
$table{"\x83\x5b"} = "\xbe\xde";
$table{"\x83\x5d"} = "\xbf\xde";
$table{"\x83\x5f"} = "\xc0\xde";
$table{"\x83\x61"} = "\xc1\xde";
$table{"\x83\x64"} = "\xc2\xde";
$table{"\x83\x66"} = "\xc3\xde";
$table{"\x83\x68"} = "\xc4\xde";
$table{"\x83\x6f"} = "\xca\xde";
$table{"\x83\x70"} = "\xca\xdf";
$table{"\x83\x72"} = "\xcb\xde";
$table{"\x83\x73"} = "\xcb\xdf";
$table{"\x83\x75"} = "\xcc\xde";
$table{"\x83\x76"} = "\xcc\xdf";
$table{"\x83\x78"} = "\xcd\xde";
$table{"\x83\x79"} = "\xcd\xdf";
$table{"\x83\x7b"} = "\xce\xde";
$table{"\x83\x7c"} = "\xce\xdf";

$ascii = '[\x00-\x80\xa0-\xdf\xfd-\xff]';
$twoBytes = '[\x81-\x9f\xe0-\xfc][\x40-\x7e\x80-\xfc]';

while(<>) {
	s/($ascii|$twoBytes)/defined($table{$1}) ? $table{$1} : $1/ge;
#	s/($ascii|$twoBytes)/defined($table{$1}) ? $table{$1} : $1 =~ m#($twoBytes)# ? "" : $1/ge;
#   変換できない文字は削除する場合は上記
	print;
}
